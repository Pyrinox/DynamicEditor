{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import interact from 'interactjs'\nimport * as React from 'react'\nimport { Subtract } from \"utility-types\"\n\nconst options = [\n  'draggable',\n  'resizable',\n  'gesturable',\n  'dropzone',\n]\nconst events = [\n  // Interact Events\n  'DragStart',\n  'DragMove',\n  'DragInertiaStart',\n  'DragEnd',\n  'ResizeStart',\n  'ResizeMove',\n  'ResizeInertiaStart',\n  'ResizeEnd',\n  'GestureStart',\n  'GestureMove',\n  'GestureEnd',\n  // Drop Events\n  'DropActivate',\n  'DropdEactivate',\n  'DragEnter',\n  'DragLeave',\n  'DropMove',\n  'Drop',\n  // Pointer Events\n  'Down',\n  'Move',\n  'Up',\n  'Cancel',\n  'Tap',\n  'DoubleTap',\n  'Hold',\n]\n\nconst getDisplayName = (BaseComponent: React.ComponentType) =>\n  BaseComponent.displayName || 'Component'\n\ninterface InjectedProps {\n  getRef: React.RefObject<HTMLElement>;\n}\ninterface InteractProps {\n  draggable?: Interact.DraggableOptions | boolean;\n  resizable?: Interact.ResizableOptions | boolean;\n  gesturable?: Interact.ResizableOptions | boolean;\n  dropzone?: Interact.DropzoneOptions | boolean;\n  onDragStart?: Interact.ListenersArg;\n  onDragMove?: Interact.ListenersArg;\n  onDragEnd?: Interact.ListenersArg;\n  onResizeStart?: Interact.ListenersArg;\n  onResizeMove?: Interact.ListenersArg;\n  onResizeInertiaStart?: Interact.ListenersArg;\n  onResizeEnd?: Interact.ListenersArg;\n  onGestureStart?: Interact.ListenersArg;\n  onGestureMove?: Interact.ListenersArg;\n  onGestureEnd?: Interact.ListenersArg;\n  onDropActivate?: Interact.ListenersArg;\n  onDropdEactivate?: Interact.ListenersArg;\n  onDragEnter?: Interact.ListenersArg;\n  onDragLeave?: Interact.ListenersArg;\n  onDropMove?: Interact.ListenersArg;\n  onDrop?: Interact.ListenersArg;\n  onDown?: Interact.ListenersArg;\n  onMove?: Interact.ListenersArg;\n  onUp?: Interact.ListenersArg;\n  onCancel?: Interact.ListenersArg;\n  onTap?: Interact.ListenersArg;\n  onDoubleTap?: Interact.ListenersArg;\n  onHold?: Interact.ListenersArg;\n}\n\nconst reactable = <BaseProps extends InjectedProps>(\n  BaseComponent: React.ComponentType<BaseProps>\n) => {\n\n  type HocProps = Subtract<BaseProps, InjectedProps> & InteractProps\n\n  return class Reactable extends React.Component<HocProps> {\n    static displayName = `reactable(${getDisplayName(BaseComponent)})`\n    interactable: Interact.Interactable\n    node = React.createRef<any>()\n\n    // componentDidMount of parent is called after all his children is mounted\n    componentDidMount() {\n      if (!this.node.current) {\n        console.error(' you should apply getRef props in the dom element') // eslint-disable-line\n        return\n      }\n      this.interactable = interact(this.node.current)\n      options.forEach((option) => {\n        if (option in this.props) {\n          this.interactable[option](this.props[option])\n        }\n      })\n      events.forEach((event) => {\n        const handler = this.props[`on${event}`]\n        if (typeof handler === 'function') {\n          this.interactable\n            .on(event.toLowerCase(), handler)\n        }\n      })\n    }\n    componentWillUnmount() {\n      this.interactable.unset()\n    }\n    baseProps(props) {\n      const baseProps = { ...props }\n      options.forEach(option => delete baseProps[option])\n      events.forEach(event => delete baseProps[`on${event}`])\n      return baseProps\n    }\n    render() {\n      return (<BaseComponent\n        {...this.baseProps(this.props)}\n        getRef={this.node}\n      />)\n    }\n  }\n\n}\nexport default reactable\n"],"names":["const","options","events","getDisplayName","BaseComponent","displayName","reactable","constructor","React","componentDidMount","node","current","console","error","interactable","interact","forEach","option","this","props","event","handler","on","toLowerCase","componentWillUnmount","unset","baseProps","render","getRef","_a"],"mappings":";;;;;AAIAA,IAAMC,OAAO,GAAG,CACd,WADc,EAEd,WAFc,EAGd,YAHc,EAId,UAJc,CAAhB;AAMAD,IAAME,MAAM,GAAG;AAEb,WAFa,EAGb,UAHa,EAIb,kBAJa,EAKb,SALa,EAMb,aANa,EAOb,YAPa,EAQb,oBARa,EASb,WATa,EAUb,cAVa,EAWb,aAXa,EAYb,YAZa;AAcb,cAda,EAeb,gBAfa,EAgBb,WAhBa,EAiBb,WAjBa,EAkBb,UAlBa,EAmBb,MAnBa;AAqBb,MArBa,EAsBb,MAtBa,EAuBb,IAvBa,EAwBb,QAxBa,EAyBb,KAzBa,EA0Bb,WA1Ba,EA2Bb,MA3Ba,CAAf;;AA8BAF,IAAMG,cAAc,aAAIC,wBACtBA,aAAa,CAACC,WAAd,IAA6B,cAD/B;;AAoCAL,IAAMM,SAAS,aACbF;;;;IAKOG;;eAGL,GAAOC,eAAA,EAAP;;;;;;;;wBAGAC;;;UACM,CAAC,KAAKC,IAAL,CAAUC,OAAf,EAAwB;QACtBC,OAAO,CAACC,KAAR,CAAc,mDAAd,EADsB;;;;;WAInBC,YAAL,GAAoBC,QAAQ,CAAC,KAAKL,IAAL,CAAUC,OAAX,CAA5B;MACAV,OAAO,CAACe,OAAR,WAAiBC;YACXA,MAAM,IAAIC,OAAKC,KAAnB,EAA0B;iBACnBL,YAAL,CAAkBG,MAAlB,EAA0BC,OAAKC,KAAL,CAAWF,MAAX,CAA1B;;OAFJ;MAKAf,MAAM,CAACc,OAAP,WAAgBI;YACRC,OAAO,GAAGH,OAAKC,KAAL,SAAgBC,OAAhC;;YACI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC;iBAC5BP,YAAL,CACGQ,EADH,CACMF,KAAK,CAACG,WAAN,EADN,EAC2BF,OAD3B;;OAHJ;;;wBAQFG;WACOV,YAAL,CAAkBW,KAAlB;;;wBAEFC,gCAAUP,KAAD;UACDO,SAAS,GAAG,kBAAKP,MAAvB;MACAlB,OAAO,CAACe,OAAR,WAAgBC,iBAAU,OAAOS,SAAS,CAACT,MAAD,IAA1C;MACAf,MAAM,CAACc,OAAP,WAAeI,gBAAS,OAAOM,SAAS,SAAMN,UAA9C;aACOM,SAAP;;;wBAEFC;aACUnB,mBAAA,CAACJ,aAAD,oBACF,KAAKsB,SAAL,CAAe,KAAKP,KAApB;QACJS,MAAM,EAAE,KAAKlB;QAFP,CAAR;;;;uBAlCKmB,cAAA,mBAA2B1B,cAAc,CAACC,aAAD,YADlD;CANF;;;;"}